<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>××‘×—×•×Ÿ ×‘×©×œ×•×ª ×“××˜×” - ××¨×’×•×Ÿ ×—×‘×¨×ª×™</title>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #2E3192;
      --secondary: #00B4D8;
      --accent: #90E0EF;
      --success: #52B788;
      --warning: #F77F00;
      --danger: #D62828;
      --dark: #0D1B2A;
      --gray: #415A77;
      --light-gray: #E0E1DD;
      --white: #FFFFFF;
      --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    body { font-family: 'Assistant', system-ui, -apple-system, "Segoe UI", Arial, sans-serif; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      color: var(--dark);
      line-height: 1.6;
      direction: rtl;
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

    .header {
      background: var(--white);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: var(--card-shadow);
      position: relative;
      overflow: hidden;
      animation: slideDown 0.6s ease;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer { 0% { transform: translateX(-100%);} 100% { transform: translateX(100%);} }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-30px);} to { opacity: 1; transform: translateY(0);} }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header p { font-size: 1.2rem; color: var(--gray); font-weight: 400; }

    .start-screen {
      text-align: center;
      padding: 60px 40px;
      background: var(--white);
      border-radius: 20px;
      box-shadow: var(--card-shadow);
      margin-bottom: 40px;
      animation: zoomIn 0.6s ease;
    }
    @keyframes zoomIn { from { opacity: 0; transform: scale(0.8);} to { opacity: 1; transform: scale(1);} }

    .start-screen h2 { font-size: 2rem; color: var(--primary); margin-bottom: 20px; font-weight: 700; }
    .start-screen p { font-size: 1.15rem; color: var(--gray); margin-bottom: 30px; line-height: 1.9; }

    .progress-container {
      background: var(--white);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--card-shadow);
      animation: slideUp 0.8s ease;
    }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);} }

    .progress-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .progress-bar { background: var(--light-gray); height: 12px; border-radius: 10px; overflow: hidden; position: relative; }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 10px;
      transition: width 0.5s ease;
      position: relative;
      box-shadow: 0 2px 10px rgba(46, 49, 146, 0.3);
    }
    .progress-fill::after {
      content: '';
      position: absolute; top: 0; right: 0; bottom: 0; left: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shine 2s infinite;
    }
    @keyframes shine { 0% { transform: translateX(-100%);} 100% { transform: translateX(100%);} }

    .section-card {
      background: var(--white);
      border-radius: 20px;
      padding: 35px;
      margin-bottom: 30px;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95);} to { opacity: 1; transform: scale(1);} }

    .section-card:hover { transform: translateY(-5px); box-shadow: var(--hover-shadow); }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 3px solid var(--accent);
    }

    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--white);
      border-radius: 50%;
      margin-left: 15px;
      font-weight: 700;
      font-size: 1.2rem;
    }

    .question {
      margin-bottom: 25px;
      padding: 20px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 15px;
      border-right: 4px solid var(--accent);
      transition: all 0.3s ease;
    }
    .question:hover {
      background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
      transform: translateX(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .question-text {
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--dark);
      margin-bottom: 12px;
      line-height: 1.7;
    }

    .hint {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      padding: 12px;
      border-radius: 10px;
      margin-top: 12px;
      font-size: 0.95rem;
      color: var(--gray);
      border-right: 3px solid var(--secondary);
      animation: slideIn 0.4s ease;
    }
    @keyframes slideIn { from { opacity: 0; transform: translateX(20px);} to { opacity: 1; transform: translateX(0);} }

    .binary-container {
      display: inline-flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    .binary-btn {
      padding: 12px 16px;
      border-radius: 12px;
      border: 2px solid var(--light-gray);
      background: var(--white);
      cursor: pointer;
      font-weight: 800;
      transition: all 0.25s ease;
      min-width: 120px;
      text-align: center;
    }

    .binary-btn:hover {
      transform: translateY(-2px);
      border-color: var(--secondary);
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    }

    .binary-btn.selected-yes {
      background: linear-gradient(135deg, var(--success), #3aa66f);
      color: var(--white);
      border-color: var(--success);
      box-shadow: 0 8px 20px rgba(82, 183, 136, 0.35);
    }

    .binary-btn.selected-no {
      background: linear-gradient(135deg, var(--danger), #c51f1f);
      color: var(--white);
      border-color: var(--danger);
      box-shadow: 0 8px 20px rgba(214, 40, 40, 0.30);
    }

    .scale-container { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; align-items: center; }

    .scale-button {
      width: 60px; height: 60px;
      border: 2px solid var(--light-gray);
      background: var(--white);
      border-radius: 12px;
      font-size: 1.25rem;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .scale-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
      border-color: var(--secondary);
    }
    .scale-button.selected {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--white);
      border-color: var(--primary);
      transform: scale(1.08);
      box-shadow: 0 8px 20px rgba(46, 49, 146, 0.3);
    }

    .scale-button.na {
      width: auto;
      padding: 0 14px;
      min-width: 140px;
      font-size: 0.95rem;
      font-weight: 900;
      border-style: dashed;
    }

    .scale-button:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    .scale-labels {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-top: 8px;
      font-size: 0.9rem;
      color: var(--gray);
    }

    .radio-container { display: flex; flex-direction: column; gap: 12px; margin-top: 12px; }

    .radio-option {
      display: flex;
      align-items: center;
      padding: 15px;
      background: var(--white);
      border: 2px solid var(--light-gray);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .radio-option:hover {
      background: linear-gradient(135deg, rgba(144, 224, 239, 0.1), rgba(0, 180, 216, 0.05));
      border-color: var(--secondary);
      transform: translateX(-5px);
    }
    .radio-option.selected {
      background: linear-gradient(135deg, rgba(46, 49, 146, 0.1), rgba(0, 180, 216, 0.1));
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(46, 49, 146, 0.2);
    }

    .radio-circle {
      width: 24px;
      height: 24px;
      border: 3px solid var(--gray);
      border-radius: 50%;
      margin-left: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    .radio-option.selected .radio-circle { border-color: var(--primary); }
    .radio-option.selected .radio-circle::after {
      content: '';
      width: 12px;
      height: 12px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
    }

    .results-section {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 20px;
      padding: 40px;
      margin-top: 40px;
      color: var(--white);
      box-shadow: 0 15px 40px rgba(46, 49, 146, 0.3);
      display: none;
      animation: bounceIn 0.8s ease;
    }
    @keyframes bounceIn { 0% { opacity: 0; transform: scale(0.8);} 50% { transform: scale(1.05);} 100% { opacity: 1; transform: scale(1);} }
    .results-section.show { display: block; }

    .results-title { font-size: 2.2rem; font-weight: 900; margin-bottom: 22px; text-align: center; }

    .score-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
      margin-bottom: 24px;
    }
    @media (min-width: 900px) {
      .score-grid { grid-template-columns: 1fr 1.1fr; align-items: stretch; }
    }

    .score-container {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 26px;
      text-align: center;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .total-score {
      font-size: 4rem;
      font-weight: 900;
      margin-bottom: 6px;
      text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .score-label { font-size: 1.3rem; font-weight: 600; opacity: 0.95; }

    .maturity-level {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 18px;
      margin-top: 14px;
      text-align: center;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .level-badge {
      display: inline-block;
      padding: 10px 26px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 30px;
      font-size: 1.2rem;
      font-weight: 900;
      margin-bottom: 10px;
    }

    .level-description { font-size: 1.05rem; line-height: 1.7; opacity: 0.98; }

    .radar-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 18px;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    .radar-title { font-size: 1.25rem; font-weight: 900; margin-bottom: 10px; text-align: center; }
    .radar-wrap { width: 100%; display: flex; justify-content: center; align-items: center; }
    .radar-sub { text-align: center; opacity: 0.95; margin-top: 8px; font-size: 0.95rem; }

    .categories-breakdown { margin-top: 26px; }
    .categories-breakdown h3 { margin-bottom: 14px; font-size: 1.4rem; font-weight: 900; }

    .category-item {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 18px;
      margin-bottom: 14px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; gap: 10px; }
    .category-name { font-size: 1.05rem; font-weight: 900; }
    .category-score { font-size: 1.2rem; font-weight: 900; white-space: nowrap; }

    .category-meta {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-bottom: 10px;
      opacity: 0.98;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.18);
      border: 1px solid rgba(255,255,255,0.22);
      font-weight: 900;
      font-size: 0.92rem;
    }

    .category-feedback {
      margin-top: 8px;
      line-height: 1.7;
      font-size: 1rem;
      opacity: 0.98;
    }

    .category-bar { background: rgba(255, 255, 255, 0.2); height: 8px; border-radius: 10px; overflow: hidden; }
    .category-fill {
      height: 100%;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.85));
      border-radius: 10px;
      transition: width 1s ease;
    }

    .button-container { display: flex; gap: 15px; justify-content: center; margin-top: 30px; flex-wrap: wrap; }

    .btn {
      padding: 15px 35px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--white);
      box-shadow: 0 4px 15px rgba(46, 49, 146, 0.3);
    }
    .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(46, 49, 146, 0.4); }

    .btn-secondary {
      background: var(--white);
      color: var(--primary);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .btn-secondary:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }

    .btn-success {
      background: linear-gradient(135deg, var(--success), #52B788);
      color: var(--white);
      box-shadow: 0 4px 15px rgba(82, 183, 136, 0.3);
    }
    .btn-success:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(82, 183, 136, 0.4); }

    .icon { font-size: 1.2rem; }

    @media (max-width: 768px) {
      .header h1 { font-size: 1.8rem; }
      .section-title { font-size: 1.4rem; }
      .scale-container { justify-content: flex-start; }
      .scale-button { width: 50px; height: 50px; font-size: 1.05rem; }
      .scale-button.na { min-width: 100%; width: 100%; height: 46px; }
      .btn { padding: 12px 25px; font-size: 1rem; }
      .total-score { font-size: 3rem; }
      .button-container { flex-direction: column; }
      .binary-btn { min-width: 46%; flex: 1; }
    }

    @media print {
      body { background: white; }
      .btn, .button-container { display: none !important; }
      .section-card { page-break-inside: avoid; box-shadow: none; border: 1px solid #ddd; }
      .question:hover { transform: none; box-shadow: none; }
      .results-section { color: #111; background: white; box-shadow: none; border: 1px solid #ddd; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¯ ×›×œ×™ ××‘×—×•×Ÿ ×‘×©×œ×•×ª ×“××˜×” ××¨×’×•× ×™×ª</h1>
      <p>×’×¨×¡×” ×œ××¨×’×•× ×™× ×—×‘×¨×ª×™×™× (×¢××•×ª×•×ª/××¨×’×•× ×™×)</p>
    </div>

<div id="startScreen" class="start-screen">
      <h2>×‘×¨×•×›×™× ×”×‘××™× ×œ×›×œ×™ ×”××‘×—×•×Ÿ</h2>
      <p>
        ××˜×¨×ª ×”×©××œ×•×Ÿ ×”×™× ×œ×¢×–×•×¨ ×œ×›× ×œ×§×‘×œ ×ª××•× ×ª ××¦×‘ ×¨××©×•× ×™×ª ×¢×œ ×”×¢×‘×•×“×” ×¢× × ×ª×•× ×™× ×‘××¨×’×•×Ÿ â€” ××™×¤×” ××ª× ×—×–×§×™×, ×•××™×¤×” ×™×© ×”×–×“×× ×•×™×•×ª ×œ×©×™×¤×•×¨.<br>
    ×”××¢× ×” ×œ×•×§×— ×œ×¨×•×‘ ×›Ö¾10 ×“×§×•×ª. ××™×Ÿ ×›××Ÿ â€œ×¦×™×•×Ÿ ×œ×©×™×¤×•×˜â€ â€” ×¨×§ ×›×œ×™ ×œ××™×“×” ×•×ª×›× ×•×Ÿ.<br>
        .
      </p>
      <button class="btn btn-primary" onclick="startAssessment()">
        <span class="icon">ğŸš€</span>
        ×”×ª×—×œ ××‘×—×•×Ÿ
      </button>
    </div>

    <div id="progressContainer" class="progress-container" style="display:none;">
      <div class="progress-info">
        <span style="font-weight: 900;">×”×ª×§×“××•×ª ×‘××™×œ×•×™</span>
        <span id="progressText">0%</span>
      </div>
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill" style="width:0%;"></div>
      </div>
    </div>

    <div id="questionsContainer"></div>

    <div id="resultsSection" class="results-section">
      <h2 class="results-title">ğŸ“Š ×ª×•×¦××•×ª ×”××‘×—×•×Ÿ</h2>

      <div class="score-grid">
        <div>
          <div class="score-container">
            <div id="totalScore" class="total-score">0%</div>
            <div class="score-label">×¦×™×•×Ÿ ×›×•×œ×œ</div>

            <div class="maturity-level">
              <div id="levelBadge" class="level-badge">×¨××ª ×‘×©×œ×•×ª</div>
              <p id="levelDescription" class="level-description"></p>
            </div>
          </div>
        </div>

        <div class="radar-card">
          <div class="radar-title">×•×™×–×•××œ×™×–×¦×™×” ×›×•×œ×œ×ª ×œ×¤×™ ×××“×™× (×¨×“××¨)</div>
          <div class="radar-wrap">
            <div id="radarContainer"></div>
          </div>
          <div class="radar-sub">×”×ª×¨×©×™× ××¦×™×’ ××ª ××—×•×– ×”×‘×©×œ×•×ª ×‘×›×œ ×××“ (0%â€“100%).</div>
        </div>
      </div>

      <div class="categories-breakdown">
        <h3>×¤×™×¨×•×˜ ×œ×¤×™ ×××“×™×</h3>
        <div id="categoriesResults"></div>
      </div>

      <div class="button-container">
        <button class="btn btn-secondary" onclick="printResults()">
          <span class="icon">ğŸ–¨ï¸</span>
          ×”×“×¤×¡ ×ª×•×¦××•×ª
        </button>
        <button class="btn btn-success" onclick="exportResults()">
          <span class="icon">ğŸ“¥</span>
          ×™×™×¦× ×œ××§×¡×œ (CSV)
        </button>
        <button class="btn btn-primary" onclick="restartAssessment()">
          <span class="icon">ğŸ”„</span>
          ×”×ª×—×œ ××—×“×©
        </button>
      </div>
    </div>

    <div id="navigationButtons" class="button-container" style="display:none;">
      <button id="prevBtn" class="btn btn-secondary" onclick="previousSection()">
        <span class="icon">â†’</span>
        ×—×–×•×¨
      </button>
      <button id="nextBtn" class="btn btn-primary" onclick="nextSection()">
        ×”××©×š
        <span class="icon">â†</span>
      </button>
      <button id="finishBtn" class="btn btn-success" onclick="showResults()" style="display:none;">
        <span class="icon">âœ…</span>
        ×¡×™×™× ×•×¦×¤×” ×‘×ª×•×¦××•×ª
      </button>
    </div>
  </div>

  <script>
    // ====== DATA (××¨×’×•× ×™× ×—×‘×¨×ª×™×™×) ======
    const assessmentData = [
      {
        "title": "××˜×¨×•×ª, ×™×¢×“×™× ×•×©××œ×•×ª",
        "questions": [
          {
            "text": "×”×× ×œ××¨×’×•×Ÿ ×™×© ×ª×™××•×¨×™×™×ª ×©×™× ×•×™ ×¡×“×•×¨×”, ×©×‘×” ×× ×•×¡×—×™× ×‘××•×¤×Ÿ ×‘×¨×•×¨ ×•××•×¡×›×",
            "type": "section",
            "subQuestions": [
              { "text": "××˜×¨×•×ª ×”×¤×¢×™×œ×•×ª", "type": "checkbox", "hint": "××˜×¨×•×ª ×”×Ÿ ×”×“×‘×¨ ×©×”×ª×›× ×™×ª ××‘×§×©×ª ×œ×”×©×™×’ - ×”×—×–×•×Ÿ ×”×’×“×•×œ" },
              { "text": "×”×ª×•×¦××•×ª ×©××ª× ×©×•××¤×™× ×œ×”×©×™×’", "type": "checkbox", "hint": "×”×ª×•×¦××•×ª ×”×Ÿ ×”×©×™× ×•×™ ×‘×¤×•×¢×œ ×‘×§×¨×‘ ××•×›×œ×•×¡×™×™×ª ×”×™×¢×“" },
              { "text": "×”×¤×¢×•×œ×•×ª ×”× × ×§×˜×•×ª ×•×”××•×¤×Ÿ ×©×‘×• ×™×‘×™××• ×œ×”×©×’×ª ×”×ª×•×¦××•×ª", "type": "checkbox", "hint": "×”×¤×¢×•×œ×•×ª ×”×Ÿ ×”×“×¨×›×™× ×©×‘×”×Ÿ ×ª×¤×¢×œ×• ×›×“×™ ×œ×”×©×™×’ ××ª ×”×ª×•×¦××•×ª" }
            ]
          },
          {
            "text": "×‘××™×–×• ××™×“×” (1= ×›×œ×œ ×œ×, 5= ×‘××™×“×” ×¨×‘×” ×××•×“) ××ª× ××©×ª××©×™× ×‘× ×ª×•× ×™× ×›×“×™:",
            "type": "section",
            "hint": "1= ×›×œ×œ ×œ×, 5= ×‘××™×“×” ×¨×‘×” ×××•×“",
            "subQuestions": [
              { "text": "×œ×”×‘×™×Ÿ ××ª ×”×‘×¢×™×” ×”×—×‘×¨×ª×™×ª ××™×ª×” ××‘×§×©×™× ×œ×”×ª××•×“×“?", "type": "scale" },
              { "text": "×œ×œ××•×“ ×¢×œ ××§×‘×œ×™ ×”×©×™×¨×•×ª ×•×”×¡×‘×™×‘×”?", "type": "scale" },
              { "text": "×œ×¢×¦×‘ ××•×¤×Ÿ ×”×™×™×©×•× ×©×œ ×”×”×ª×¢×¨×‘×•×ª/×”×ª×›× ×™×•×ª?", "type": "scale" },
              { "text": "×œ××“×•×“ ×ª×•×¦××•×ª/××™××¤×§×˜?", "type": "scale" }
            ]
          }
        ]
      },
      {
        "title": "×›×œ×™× ×•×ª×©×ª×™×•×ª",
        "questions": [
          {
            "text": "××™×š × ××¡×¤×™× ×”× ×ª×•× ×™× ×‘××¨×’×•×Ÿ?",
            "type": "radio",
            "options": [
              "×‘×¢×™×§×¨ ×‘××¡××›×™ × ×™×™×¨/×•×•×¨×“,",
              "×‘×¢×™×§×¨ ×‘×˜×¤×¡×™× ××§×•×•× ×™× ×•×§×‘×¦×™ ××§×¡×œ",
              "×‘×¢×™×§×¨ ×‘×××¦×¢×•×ª ××¢×¨×›×ª/×•×ª ××™×“×¢ ×™×™×¢×•×“×™×ª (×œ××©×œ CRM)"
            ]
          },
          {
            "text": "××™×¤×” × ×©××¨×™× ×•×× ×•×”×œ×™× ×¨×•×‘ ×”× ×ª×•× ×™×?",
            "type": "radio",
            "options": [
              "×‘×ª×™×§×™×•×ª ×”××™×©×™×•×ª/×‘××—×©×‘×™× ×©×œ ×”×¢×•×‘×“×™×",
              "×‘×ª×™×§×™×•×ª ××©×•×ª×¤×•×ª",
              "×‘×××’×¨ × ×ª×•× ×™× ×™×™×¢×•×“×™/××¢×¨×›×•×ª ××™×“×¢"
            ]
          },
          {
            "text": "×‘××™×–×• ××™×“×” ××¢×¨×›×•×ª ×”××™×“×¢ ×‘××¨×’×•×Ÿ:",
            "type": "section",
            "subQuestions": [
              { "text": "××ª××™××•×ª ×œ×¦×¨×›×™× ×• ×•×××¤×©×¨×•×ª ×¢×‘×•×“×” ××‘×•×¡×¡×ª × ×ª×•× ×™×", "type": "scale" },
              { "text": "×™×© ×¨×™×‘×•×™ ××¢×¨×›×•×ª ×‘××¨×’×•×Ÿ, ×•×§×©×” ×œ×—×‘×¨ ×•×œ×¡× ×›×¨×Ÿ × ×ª×•× ×™× ×‘×™× ×™×”× ×‘××•×¤×Ÿ ×©×™××•×©×™", "type": "scale", "reverse": true, "hint": "× ×™×§×•×“ ×”×¤×•×š: ×“×™×¨×•×’ 1 = 5 × ×§×•×“×•×ª" },
            ]
          },
          {
            "text": "×›×™×¦×“ ××ª× ××¤×™×§×™× ×•×× ×’×™×©×™× × ×ª×•× ×™× ×•×“×•×—×•×ª ×œ×× ×”×œ×™× ×•×¢×•×‘×“×™×?",
            "type": "radio",
            "options": [
              "×× ×—× ×• ×œ× ××¤×™×§×™× ×“×•×—×•×ª",
              "×‘××¡××›×™× ×•××¦×’×•×ª",
              "×‘×“×•×—×•×ª ××•×‘× ×™× ×”××‘×•×¡×¡×™× ×¢×œ ××§×¡×œ ××• ×’×•×’×œ ×©×™×˜×¡",
              "×‘×œ×•×—×•×ª ××—×•×•× ×™× ××‘×•×¡×¡×™ ××¢×¨×›×ª BI ××• ××—×¨×ª"
            ]
          },
          {
            "text": "×¢×“ ×›××” ×”× ×ª×•× ×™× ×©×™×© ×œ×›×:",
            "type": "section",
            "hint": "1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“",
            "subQuestions": [
              { "text": "×©×œ××™× ×•××œ××™× (××§×™×¤×™× ××ª ×›×œ×œ ××§×‘×œ×™ ×”×©×™×¨×•×ª/ ×”×¤×¢×™×œ×•×ª ×”×¨×œ×•×•× ×˜×™×ª)", "type": "scale" },
              { "text": "××”×™×× ×™× (××™×™×¦×’×™× × ×›×•×Ÿ ××ª ×”××¦×™××•×ª)", "type": "scale" },
              { "text": "×ª×§×™× ×™× (××™×Ÿ ×‘×”× ×˜×¢×•×™×•×ª ××• ×©×’×™××•×ª)", "type": "scale" }
            ]
          },
          { "text": "×¢×“ ×›××”  ××ª× ××©×ª××©×™× ×‘× ×ª×•× ×™× ×××§×•×¨×•×ª ××™×“×¢ ×—×™×¦×•× ×™×™× ×›××• × ×ª×•× ×™ ×”×œ×\"×¡, ××—×§×¨×™× ××§×“××™×™×, × ×ª×•× ×™× ×¦×™×‘×•×¨×™×™×?", "type": "scale", "hint": "1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" }
        ]
      },
      {
        "title": "×©×’×¨×•×ª",
        "questions": [
          {
            "text": "×‘××™×–×• ××™×“×” ××ª× ××©×ª××©×™× ×‘× ×ª×•× ×™× ×‘×©×’×¨×•×ª ×”××¨×’×•× ×™×•×ª ×”×‘××•×ª:",
            "type": "section",
            "hint": "1=×›×œ×œ ×œ×, 5=×‘××•×¤×Ÿ ×§×‘×•×¢",
            "subQuestions": [
              { "text": "×™×©×™×‘×•×ª ×¢×‘×•×“×” / ×¦×•×•×ª", "type": "scale" },
              { "text": "×™×©×™×‘×•×ª ×ª×§×¦×™×‘, ×ª×¤×¢×•×œ, ××©××‘×™ ×× ×•×©, ×’×™×•×¡ ××©××‘×™×", "type": "scale" },
              { "text": "×”×¢×¨×›×ª ×¤×¢×™×œ×•×ª/×ª×›× ×™×•×ª", "type": "scale" },
              { "text": "×“×™×•×•×—×™× ×œ×¦×™×‘×•×¨, ×œ×©×•×ª×¤×™× ×•×œ×ª×•×¨××™×", "type": "scale" },
              { "text": "××©×•×‘ ×•×”×¢×¨×›×ª ×¢×•×‘×“×™×", "type": "scale" },
              { "text": "×¤×™×ª×•×— ×¤×¢×™×œ×•×™×•×ª ×—×“×©×•×ª", "type": "scale" },
              { "text": "×‘× ×™×™×ª ×ª×›× ×™×•×ª ×¢×‘×•×“×” ×©× ×ª×™×•×ª", "type": "scale" }
            ]
          }
        ]
      },
      {
        "title": "××™×•×× ×•×™×•×ª",
        "questions": [
          {
            "text": "×”×× ×™×© ×‘××¨×’×•×Ÿ ×¢×•×‘×“-×ª ×”××—×¨××™-×ª ×¢×œ × ×•×©× ×”× ×ª×•× ×™× ××• ×”××“×™×“×” ×•×”×¢×¨×›×”?",
            "type": "radio",
            "options": [
              "××™×Ÿ ××•×‘×™×œ/××—×¨××™ × ×ª×•× ×™× ×‘××¨×’×•×Ÿ",
              "×›×Ÿ, ×‘×”×™×§×£ ×œ× ××•×’×“×¨",
              "×›×Ÿ ×‘×¤×—×•×ª × 50% ××©×¨×”",
              "×›×Ÿ ×‘ 50% ××©×¨×”",
              "×›×Ÿ, ×‘ 75% ××©×¨×” ×•××¢×œ×”"
            ]
          },
          { "text": "×¢×“ ×›××” ××ª× × ×¢×–×¨×™× ×‘××•××—×™ × ×ª×•× ×™× ×—×™×¦×•× ×™×™× ×‘××™×“×ª ×”×¦×•×¨×š?", "type": "scale", "hint": "1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          {
            "text": "×›××” (1=×›××¢×˜ ××£ ××—×“, 5=×›××¢×˜ ×›×•×œ×) ××ª×•×š ×›×œ×œ ×”×¢×•×‘×“×™× ×•×”×× ×”×œ×™× ×‘××¨×’×•×Ÿ:",
            "type": "section",
            "hint": "1=×›××¢×˜ ××£ ××—×“, 5=×›××¢×˜ ×›×•×œ×",
            "subQuestions": [
              { "text": "×™×•×“×¢×™× ×œ×§×¨×•× ×•×œ×”×‘×™×Ÿ × ×ª×•× ×™× ×”××•× ×’×©×™× ×‘×¦×•×¨×•×ª ×©×•× ×•×ª?", "type": "scale" },
              { "text": "×™×•×“×¢×™× ×œ×”×¢×¨×™×š ××ª ××™×›×•×ª ×•×××™× ×•×ª ×”× ×ª×•× ×™× ×”××•×¦×’×™× ×œ×”× ×‘××™×“×” ×•×‘××•×¤×Ÿ ×”××ª××™× ×œ×ª×¤×§×™×“×?", "type": "scale" },
              { "text": "×™×•×“×¢×™× ×œ××¡×•×£, ×œ××ª×¨ ×•×œ×¢×‘×“ × ×ª×•× ×™× ×‘××™×“×” ×•×‘××•×¤×Ÿ ×”××ª××™× ×œ×ª×¤×§×™×“×?", "type": "scale" }
            ]
          },
          { "text": "×‘××™×–×• ××™×“×” ××ª×§×™×™××•×ª ×”×›×©×¨×•×ª ×‘× ×•×©× ×¢×‘×•×“×” ×¢× × ×ª×•× ×™× ×œ×¢×•×‘×“×™× ×•×× ×”×œ×™×?", "type": "scale", "hint": "1=×›×œ×œ ×œ×, 5=×‘××•×¤×Ÿ ×§×‘×•×¢" }
        ]
      },
      {
        "title": "×ª×¨×‘×•×ª ×•×× ×”×™×’×•×ª",
        "questions": [
          { "text": "×”×× ×§×™×™× ×ª×§×¦×™×‘ ×™×™×¢×•×“×™ ×œ××“×™×“×” ×•×”×¢×¨×›×”, ×œ×¤×™×ª×•×— ×ª×©×ª×™×•×ª × ×ª×•× ×™× ×•/××• ×œ×™×¢×•×¥ ×‘× ×•×©× × ×ª×•× ×™×?", "type": "checkbox" },
          {
            "text": "××™×š ×”×™×™×ª ××ª××¨×ª ××ª ×”××§×•× ×©×‘×• ××ª× × ××¦××™× ×‘×›×œ ×”×§×©×•×¨ ×œ×ª×›× ×•×Ÿ ×•××¤×™×•×Ÿ ×”×¢×‘×•×“×” ×¢× × ×ª×•× ×™×?",
            "type": "radio",
            "options": [
              "×¢×“×™×™×Ÿ ×œ× ×”×§×“×©× ×• ××—×©×‘×” ×œ×¦×¨×›×™ ×”× ×ª×•× ×™× ×•×œ××•×¤×Ÿ ×©×‘×• ×”× ×ª×•× ×™× ×™×©×¨×ª×• ××•×ª× ×•.",
              "×‘×¨×•×¨ ×œ× ×• ××”×Ÿ ×”×©××œ×•×ª ×©×”×™×™× ×• ×¨×•×¦×™× ×œ×‘×¨×¨ ×‘×¢×–×¨×ª × ×ª×•× ×™×, ×•××”× ×¦×¨×›×™ ×”× ×ª×•× ×™× ×”× ×’×–×¨×™× ××”×Ÿ",
              "×™×© ×œ× ×• ×ª×›× ×™×ª ×¤×¢×•×œ×” ×¡×“×•×¨×” ×©×ª××¤×©×¨ ×œ× ×• ×œ×¢× ×•×ª ×¢×œ ×©××œ×•×ª ×”××¤×ª×— ×‘×××¦×¢×•×ª × ×ª×•× ×™×"
            ]
          },
          { "text": "×¢×“ ×›××” ×¢×•×‘×“×™× ×•×× ×”×œ×™× ×—×©×™× ×‘× ×•×— ×œ×“×•×Ÿ ×‘×©××œ×•×ª ××•×¨×›×‘×•×ª ×©×¢×•×œ×•×ª ××ª×•×š ×”× ×ª×•× ×™× ×•×œ×‘×¦×¢ ×©×™× ×•×™×™× ××ª××™××™×?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×¢×“ ×›××” ×œ×“×¢×ª×š ×”××¨×’×•×Ÿ ××©×ª×£ × ×ª×•× ×™× ×¢× ×©×•×ª×¤×™× ×•×ª×•×¨××™× ×›×‘×¡×™×¡ ×œ×©×™×— ××§×¦×•×¢×™ ×•×œ××™×“×”?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×‘××™×–×• ××™×“×” ×¦×•×•×ª×™× ×•×¢×•×‘×“×™× ××©×ª×¤×™× ×‘×™× ×™×”× × ×ª×•× ×™× ×œ×¦×•×¨×š ×”×¢×‘×•×“×” ×”×©×•×˜×¤×ª ×•×”×œ××™×“×” ×”××¨×’×•× ×™×ª?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×‘××™×–×• ××™×“×” ×”×©×™××•×© ×‘× ×ª×•× ×™× × ×ª×¤×¡ ×‘××¨×’×•×Ÿ ×›×“×‘×¨ ×©×’×¨×ª×™ ×”××”×•×•×” ×—×œ×§ ×‘×œ×ª×™ × ×¤×¨×“ ××”×¢×‘×•×“×” ×”×©×•×˜×¤×ª, ×•×‘×¢×œ ×¢×¨×š ×œ×œ××™×“×” ××™×©×™×ª, ×¦×•×•×ª×™×ª ×•××¨×’×•× ×™×ª?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×‘××™×–×• ××™×“×” ×× ×”×œ×™× ××¢×•×“×“×™× ××ª ×”×¢×•×‘×“×™× ×œ×”×©×ª××© ×‘× ×ª×•× ×™× ×‘×ª×”×œ×™×›×™ ×”×¢×‘×•×“×” ×•×§×‘×œ×ª ×”×”×—×œ×˜×•×ª?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×›××” ××× ×©×™ ×”×¦×•×•×ª ×¢×•×‘×“×™× ×‘××•×¤×Ÿ ×©×•×˜×£ ×¢× × ×ª×•× ×™× ×‘××¨×’×•×Ÿ?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          { "text": "×‘××™×–×• ××™×“×” ×›×œ ××—×“ ××× ×©×™ ×”×¦×•×•×ª ×“×•××’ ×©×”× ×ª×•× ×™× ×©×”×•× ××•×¡×£ ××• ××©×ª××© ×‘×”× ×™×”×™×• × ×›×•× ×™× ×•××œ××™×?", "type": "scale", "allowZero": true, "hint": "0=×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™, 1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" }
        ]
      },
      {
        "title": "××ª×™×§×” ×•××©×™×œ×•×ª × ×ª×•× ×™×",
        "questions": [
          { "text": "×‘××™×–×• ××™×“×” ××ª-×” ××›×™×¨-×” ××ª ×”×”× ×—×™×•×ª ×•×”××’×‘×œ×•×ª ×”×—×•×§×™×•×ª ×‘× ×•×©××™ ××‘×˜×—×ª ××™×“×¢ ×•×”×’× ×ª ×”×¤×¨×˜×™×•×ª?", "type": "scale", "hint": "1=×›×œ×œ ×œ×, 5=×‘××™×“×” ×¨×‘×” ×××•×“" },
          {
            "text": "×›×“×™ ×œ×©××•×¨ ×¢×œ ×¢×§×¨×•× ×•×ª ×©×œ ×©×§×™×¤×•×ª, ××—×¨×™×•×ª ×•×”×’× ×ª ×”×¤×¨×˜×™×•×ª ×‘× ×ª×•× ×™×",
            "type": "section",
            "subQuestions": [
              { "text": "×× ×—× ×• ××¡×¤×¨×™× ×œ××•×˜×‘×™× ××™×–×” × ×ª×•× ×™× ×× ×—× ×• ××•×¡×¤×™× ×¢×œ×™×”× ×•×œ××” ×× ×—× ×• ××•×¡×¤×™× ××•×ª×.", "type": "checkbox" },
              { "text": "×× ×—× ×• ××§×¤×™×“×™× ×œ×©××•×¨ ×¢×œ ×¤×¨×˜×™×•×ª ×”××•×˜×‘×™× ×›××©×¨ ×× ×• ××•×¡×¤×™× × ×ª×•× ×™× ×•××©×ª××©×™× ×‘×”×", "type": "checkbox" },
              { "text": "×× ×—× ×• ××¤×¢×™×œ×™× ×›×œ×™× ×•× ×”×œ×™× ×œ××‘×˜×—×ª ×”× ×ª×•× ×™× ×”× ××¡×¤×™× ××¤× ×™ ×¤×¨×™×¦×”, ×“×œ×™×¤×” ××• ×’×™×©×” ×œ× ××•×¨×©×™×ª", "type": "checkbox" }
            ]
          }
        ]
      }
    ];

    // ====== STATE ======
    let currentSectionIndex = 0;
    let answers = {}; // id -> number (scale/radio), 1/0 (binary)

    // ====== INIT ======
    function init() {
      renderQuestions();
      updateProgress();
    }

    function startAssessment() {
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('progressContainer').style.display = 'block';
      document.getElementById('navigationButtons').style.display = 'flex';
      showSection(0);
    }

    function renderQuestions() {
      const container = document.getElementById('questionsContainer');
      container.innerHTML = '';

      assessmentData.forEach((section, sectionIndex) => {
        const sectionCard = document.createElement('div');
        sectionCard.className = 'section-card';
        sectionCard.id = `section-${sectionIndex}`;
        sectionCard.style.display = 'none';

        const sectionTitle = document.createElement('div');
        sectionTitle.className = 'section-title';
        sectionTitle.innerHTML = `<span class="section-number">${sectionIndex + 1}</span>${section.title}`;
        sectionCard.appendChild(sectionTitle);

        section.questions.forEach((question, questionIndex) => {
          const questionDiv = createQuestion(question, `${sectionIndex}-${questionIndex}`);
          sectionCard.appendChild(questionDiv);
        });

        container.appendChild(sectionCard);
      });
    }

    function createQuestion(question, id) {
      const questionDiv = document.createElement('div');
      questionDiv.className = 'question';

      // "section" question (title + sub questions)
      if (question.type === 'section' && question.subQuestions) {
        const titleDiv = document.createElement('div');
        titleDiv.className = 'question-text';
        titleDiv.textContent = question.text;
        questionDiv.appendChild(titleDiv);

        if (question.hint) {
          const hint = document.createElement('div');
          hint.className = 'hint';
          hint.innerHTML = `<strong>ğŸ’¡ ×˜×™×¤:</strong> ${question.hint}`;
          questionDiv.appendChild(hint);
        }

        question.subQuestions.forEach((subQ, subIndex) => {
          const subDiv = createQuestion(subQ, `${id}-${subIndex}`);
          questionDiv.appendChild(subDiv);
        });

        return questionDiv;
      }

      const textDiv = document.createElement('div');
      textDiv.className = 'question-text';
      textDiv.textContent = question.text;
      questionDiv.appendChild(textDiv);

      // checkbox -> 2 buttons
      if (question.type === 'checkbox') {
        const binary = document.createElement('div');
        binary.className = 'binary-container';

        const yesBtn = document.createElement('button');
        yesBtn.type = 'button';
        yesBtn.className = 'binary-btn';
        yesBtn.id = `bin-${id}-yes`;
        yesBtn.textContent = '×§×™×™× ';
        yesBtn.onclick = () => setBinary(id, 1);

        const noBtn = document.createElement('button');
        noBtn.type = 'button';
        noBtn.className = 'binary-btn';
        noBtn.id = `bin-${id}-no`;
        noBtn.textContent = '×œ× ×§×™×™× ';
        noBtn.onclick = () => setBinary(id, 0);

        binary.appendChild(yesBtn);
        binary.appendChild(noBtn);
        questionDiv.appendChild(binary);

      } else if (question.type === 'scale') {
        const scaleContainer = document.createElement('div');
        scaleContainer.className = 'scale-container';

        // allowZero => add "×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™" (=0) button
        if (question.allowZero) {
          const naBtn = document.createElement('button');
          naBtn.type = 'button';
          naBtn.className = 'scale-button na';
          naBtn.id = `scale-${id}-0`;
          naBtn.textContent = '×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™';
          naBtn.onclick = () => selectScale(id, 0);
          scaleContainer.appendChild(naBtn);
        }

        for (let i = 1; i <= 5; i++) {
          const button = document.createElement('button');
          button.type = 'button';
          button.className = 'scale-button';
          button.id = `scale-${id}-${i}`;
          button.textContent = i;
          button.onclick = () => selectScale(id, i);
          scaleContainer.appendChild(button);
        }

        questionDiv.appendChild(scaleContainer);

        const labels = document.createElement('div');
        labels.className = 'scale-labels';
        labels.innerHTML = '<span>×›×œ×œ ×œ×</span><span>×‘××™×“×” ×¨×‘×” ×××•×“</span>';
        questionDiv.appendChild(labels);

      } else if (question.type === 'radio' && question.options) {
        const radioContainer = document.createElement('div');
        radioContainer.className = 'radio-container';

        question.options.forEach((option, optIndex) => {
          const radioOption = document.createElement('div');
          radioOption.className = 'radio-option';
          radioOption.id = `radio-${id}-${optIndex}`;
          radioOption.onclick = () => selectRadio(id, optIndex);

          const circle = document.createElement('div');
          circle.className = 'radio-circle';

          const label = document.createElement('span');
          label.textContent = option;

          radioOption.appendChild(circle);
          radioOption.appendChild(label);
          radioContainer.appendChild(radioOption);
        });

        questionDiv.appendChild(radioContainer);
      }

      if (question.hint) {
        const hint = document.createElement('div');
        hint.className = 'hint';
        hint.innerHTML = `<strong>ğŸ’¡ ×˜×™×¤:</strong> ${question.hint}`;
        questionDiv.appendChild(hint);
      }

      return questionDiv;
    }

    // ====== HELPERS ======
    function setScaleDisabled(id, disabled) {
      for (let i = 1; i <= 5; i++) {
        const btn = document.getElementById(`scale-${id}-${i}`);
        if (btn) btn.disabled = disabled;
      }
      const naBtn = document.getElementById(`scale-${id}-0`);
      if (naBtn) naBtn.disabled = disabled;
    }

    function clearScaleSelection(id) {
      for (let i = 0; i <= 5; i++) {
        const btn = document.getElementById(`scale-${id}-${i}`);
        if (btn) btn.classList.remove('selected');
      }
      delete answers[id];
    }

    // ====== Binary handler ======
    function setBinary(id, value) {
      answers[id] = value;

      const yes = document.getElementById(`bin-${id}-yes`);
      const no = document.getElementById(`bin-${id}-no`);
      if (yes && no) {
        yes.classList.remove('selected-yes');
        no.classList.remove('selected-no');
        if (value === 1) yes.classList.add('selected-yes');
        if (value === 0) no.classList.add('selected-no');
      }

      // Special rule (×›××• ×‘××§×¡×œ):
      // ×‘×›×œ×™× ×•×ª×©×ª×™×•×ª -> "××¢×¨×›×•×ª ×”××™×“×¢ ×‘××¨×’×•×Ÿ" -> ×ª×ª-×©××œ×” 3 "×œ× ×™×•×“×¢/×œ× ×¨×œ×•×•× ×˜×™"
      // ×× ××¡×•××Ÿ => ×× ×§×” ×•×× ×˜×¨×œ ××ª ×©× ×™ ×”×“×™×¨×•×’×™× ×”×§×•×“××™×
      if (id === '1-2-2') {
        const scaleA = '1-2-0';
        const scaleB = '1-2-1';
        if (value === 1) {
          clearScaleSelection(scaleA);
          clearScaleSelection(scaleB);
          setScaleDisabled(scaleA, true);
          setScaleDisabled(scaleB, true);
        } else {
          setScaleDisabled(scaleA, false);
          setScaleDisabled(scaleB, false);
        }
      }

      updateProgress();
    }

    function selectScale(id, value) {
      for (let i = 0; i <= 5; i++) {
        const button = document.getElementById(`scale-${id}-${i}`);
        if (button) button.classList.remove('selected');
      }
      const selectedButton = document.getElementById(`scale-${id}-${value}`);
      if (selectedButton) selectedButton.classList.add('selected');

      answers[id] = value;

      // if user rated one of the two "××¢×¨×›×•×ª ×”××™×“×¢" scales, turn off NA checkbox (id 1-2-2)
      if (id === '1-2-0' || id === '1-2-1') {
        // set NA to "×œ×" visually + value=0
        if (answers['1-2-2'] === 1) {
          setBinary('1-2-2', 0);
        }
      }

      updateProgress();
    }

    function selectRadio(id, optionIndex) {
      const container = document.getElementById(`radio-${id}-${optionIndex}`).parentElement;
      const allOptions = container.querySelectorAll('.radio-option');
      allOptions.forEach(opt => opt.classList.remove('selected'));

      document.getElementById(`radio-${id}-${optionIndex}`).classList.add('selected');
      answers[id] = optionIndex + 1; // score 1..N
      updateProgress();
    }

    function showSection(index) {
      const sections = document.querySelectorAll('.section-card');
      sections.forEach((section, i) => section.style.display = i === index ? 'block' : 'none');

      currentSectionIndex = index;

      document.getElementById('prevBtn').style.display = index === 0 ? 'none' : 'inline-flex';
      document.getElementById('nextBtn').style.display = index === assessmentData.length - 1 ? 'none' : 'inline-flex';
      document.getElementById('finishBtn').style.display = index === assessmentData.length - 1 ? 'inline-flex' : 'none';

      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function nextSection() {
      if (currentSectionIndex < assessmentData.length - 1) showSection(currentSectionIndex + 1);
    }
    function previousSection() {
      if (currentSectionIndex > 0) showSection(currentSectionIndex - 1);
    }

    function updateProgress() {
      const totalQuestions = getTotalQuestions();
      const answeredQuestions = Object.values(answers).filter(v => v !== undefined).length;
      const progress = totalQuestions === 0 ? 0 : Math.round((answeredQuestions / totalQuestions) * 100);

      document.getElementById('progressText').textContent = `${progress}%`;
      document.getElementById('progressFill').style.width = `${progress}%`;
    }

    function getTotalQuestions() {
      let total = 0;
      assessmentData.forEach(section => {
        section.questions.forEach(question => {
          if (question.type === 'section' && question.subQuestions) total += question.subQuestions.length;
          else total++;
        });
      });
      return total;
    }

    // ====== SCORING (×›×•×œ×œ ×”×™×¤×•×š + allowZero ×œ× × ×¡×¤×¨ ×‘××§×¡×™××•×) ======
    function getQuestionMetaById(id) {
      const parts = id.split('-').map(n => parseInt(n, 10));
      const s = parts[0], q = parts[1], sub = parts.length === 3 ? parts[2] : null;
      const question = assessmentData[s]?.questions?.[q];
      if (!question) return null;
      if (sub !== null) return question.subQuestions?.[sub] || null;
      return question;
    }

    function calcScaleScore(value, meta) {
      if (meta?.allowZero && value === 0) return { score: 0, max: 0, skipped: true };
      if (value === 0) return { score: 0, max: 5, skipped: false };
      if (meta?.reverse) return { score: (6 - value), max: 5, skipped: false };
      return { score: value, max: 5, skipped: false };
    }

    function calculateScores() {
      let totalScore = 0;
      let maxScore = 0;
      let categoryScores = {};

      assessmentData.forEach((section, sectionIndex) => {
        let sectionScore = 0;
        let sectionMax = 0;

        section.questions.forEach((question, questionIndex) => {
          if (question.type === 'section' && question.subQuestions) {
            question.subQuestions.forEach((subQ, subIndex) => {
              const id = `${sectionIndex}-${questionIndex}-${subIndex}`;
              const value = answers[id];

              if (subQ.type === 'checkbox') {
                const v = value ?? 0;
                sectionScore += v;
                sectionMax += 1;
              } else if (subQ.type === 'scale') {
                const v = value ?? (subQ.allowZero ? 0 : 0);
                const res = calcScaleScore(v, subQ);
                sectionScore += res.score;
                sectionMax += res.max;
              }
            });
          } else {
            const id = `${sectionIndex}-${questionIndex}`;
            const value = answers[id];

            if (question.type === 'checkbox') {
              const v = value ?? 0;
              sectionScore += v;
              sectionMax += 1;
            } else if (question.type === 'scale') {
              const v = value ?? (question.allowZero ? 0 : 0);
              const res = calcScaleScore(v, question);
              sectionScore += res.score;
              sectionMax += res.max;
            } else if (question.type === 'radio') {
              const v = value ?? 0;
              sectionScore += v;
              sectionMax += question.options.length;
            }
          }
        });

        categoryScores[section.title] = {
          score: sectionScore,
          max: sectionMax,
          percentage: sectionMax > 0 ? Math.round((sectionScore / sectionMax) * 100) : 0
        };

        totalScore += sectionScore;
        maxScore += sectionMax;
      });

      return {
        total: totalScore,
        max: maxScore,
        percentage: maxScore > 0 ? Math.round((totalScore / maxScore) * 100) : 0,
        categories: categoryScores
      };
    }

    // ====== MATURITY LEVELS (×œ×¤×™ ×”××¤×™×•×Ÿ): <=30 ×‘×¡×™×¡×™×ª, 31-69 ××ª×¤×ª×—×ª, >=70 ××ª×§×“××ª ======
    function getMaturityLevelByPercent(pct) {
      if (pct >= 70) {
        return { level: "××ª×§×“××ª", color: "#52B788", emoji: "ğŸŸ¢",
          description: "×¨××ª ×‘×©×œ×•×ª ××ª×§×“××ª: ×™×© ×ª×©×ª×™×ª ×•×ª×”×œ×™×›×™ ×¢×‘×•×“×” ×©×××¤×©×¨×™× ×©×™××•×© ×¢×§×‘×™ ×‘× ×ª×•× ×™× ×œ×¦×•×¨×š ×ª×›× ×•×Ÿ, × ×™×”×•×œ ×•×©×™×¤×•×¨." };
      }
      if (pct >= 31) {
        return { level: "××ª×¤×ª×—×ª", color: "#F77F00", emoji: "ğŸŸ ",
          description: "×¨××ª ×‘×©×œ×•×ª ××ª×¤×ª×—×ª: ×™×© ×‘×¡×™×¡ ×§×™×™×, ××š ×§×™×™××™× ×¤×¢×¨×™× ××©××¢×•×ª×™×™×. ××•××œ×¥ ×œ×”×ª××§×“ ×‘×©×™×¤×•×¨ ×××•×§×“ ×œ×¤×™ ×××“×™× ×—×œ×©×™×." };
      }
      return { level: "×‘×¡×™×¡×™×ª", color: "#D62828", emoji: "ğŸ”´",
        description: "×¨××ª ×‘×©×œ×•×ª ×‘×¡×™×¡×™×ª: ×–×”×• ×©×œ×‘ ×˜×•×‘ ×œ×”× ×—×ª ×™×¡×•×“×•×ª ×‘×¨×•×¨×™×: ×ª×”×œ×™×›×™×, ××—×¨×™×•×ª, ×•×›×œ×™×." };
    }

    function getDimensionFeedback(name, pct) {
      const m = getMaturityLevelByPercent(pct);
      // ×›××Ÿ ××¤×©×¨ ×‘×”××©×š ×œ×—×‘×¨ ××©×•×‘×™ ×”××§×¡×œ ×”××œ××™× ×¤×¨-×©××œ×” ×× ×ª×¨×¦×™
      return { ...m, feedback: m.description };
    }

    // ====== RESULTS ======
    function showResults() {
      const scores = calculateScores();
      const maturity = getMaturityLevelByPercent(scores.percentage);

      document.getElementById('questionsContainer').style.display = 'none';
      document.getElementById('navigationButtons').style.display = 'none';
      document.getElementById('progressContainer').style.display = 'none';

      const resultsSection = document.getElementById('resultsSection');
      resultsSection.classList.add('show');

      document.getElementById('totalScore').textContent = `${scores.percentage}%`;

      const levelBadge = document.getElementById('levelBadge');
      levelBadge.textContent = `×¨××ª ×‘×©×œ×•×ª ×›×•×œ×œ×ª: ${maturity.level}`;
      levelBadge.style.background = `linear-gradient(135deg, ${maturity.color}, ${maturity.color}dd)`;
      document.getElementById('levelDescription').textContent = maturity.description;

      const categoriesContainer = document.getElementById('categoriesResults');
      categoriesContainer.innerHTML = '';

      const radarLabels = [];
      const radarValues = [];

      Object.entries(scores.categories).forEach(([name, data]) => {
        const info = getDimensionFeedback(name, data.percentage);

        radarLabels.push(name);
        radarValues.push(data.percentage);

        const item = document.createElement('div');
        item.className = 'category-item';

        item.innerHTML = `
          <div class="category-header">
            <span class="category-name">${name}</span>
            <span class="category-score">${data.percentage}%</span>
          </div>

          <div class="category-meta">
            <span class="pill">${info.emoji} ×‘×©×œ×•×ª ${info.level}</span>
            <span class="pill">× ×™×§×•×“: ${data.score} / ${data.max}</span>
          </div>

          <div class="category-bar">
            <div class="category-fill" style="width: ${data.percentage}%"></div>
          </div>

          <div class="category-feedback">${info.feedback}</div>
        `;

        categoriesContainer.appendChild(item);
      });

      renderRadarChart('radarContainer', radarLabels, radarValues);

      resultsSection.scrollIntoView({ behavior: 'smooth' });
    }

    // ====== RADAR SVG (no external libs) ======
    function renderRadarChart(containerId, labels, values) {
      const container = document.getElementById(containerId);
      if (!container) return;

      const N = labels.length;
      const size = 360;
      const cx = size / 2;
      const cy = size / 2;
      const radius = 130;

      const points = [];
      for (let i = 0; i < N; i++) {
        const angle = (-Math.PI / 2) + (2 * Math.PI * i / N);
        const r = radius * (Math.max(0, Math.min(100, values[i])) / 100);
        points.push([cx + r * Math.cos(angle), cy + r * Math.sin(angle)]);
      }

      const rings = [20, 40, 60, 80, 100];

      const labelPos = [];
      for (let i = 0; i < N; i++) {
        const angle = (-Math.PI / 2) + (2 * Math.PI * i / N);
        labelPos.push([cx + (radius + 28) * Math.cos(angle), cy + (radius + 28) * Math.sin(angle), angle]);
      }

      const polygonPoints = points.map(p => `${p[0].toFixed(1)},${p[1].toFixed(1)}`).join(' ');

      const axes = [];
      for (let i = 0; i < N; i++) {
        const angle = (-Math.PI / 2) + (2 * Math.PI * i / N);
        axes.push(`<line x1="${cx}" y1="${cy}" x2="${(cx + radius * Math.cos(angle))}" y2="${(cy + radius * Math.sin(angle))}" stroke="rgba(255,255,255,0.35)" stroke-width="1"/>`);
      }

      const ringPolys = rings.map(pct => {
        const r = radius * (pct / 100);
        const ringPts = [];
        for (let i = 0; i < N; i++) {
          const angle = (-Math.PI / 2) + (2 * Math.PI * i / N);
          ringPts.push(`${(cx + r * Math.cos(angle)).toFixed(1)},${(cy + r * Math.sin(angle)).toFixed(1)}`);
        }
        return `<polygon points="${ringPts.join(' ')}" fill="none" stroke="rgba(255,255,255,0.22)" stroke-width="1"/>`;
      }).join('');

      const labelsSvg = labels.map((txt, i) => {
        const [x, y, angle] = labelPos[i];
        const anchor =
          (Math.cos(angle) > 0.25) ? 'start' :
          (Math.cos(angle) < -0.25) ? 'end' : 'middle';
        return `<text x="${x}" y="${y}" fill="rgba(255,255,255,0.95)" font-size="12" font-weight="800" text-anchor="${anchor}">${escapeHtml(txt)}</text>`;
      }).join('');

      const dots = points.map((p, i) => `
        <circle cx="${p[0]}" cy="${p[1]}" r="4" fill="rgba(255,255,255,0.95)"/>
        <text x="${p[0] + 6}" y="${p[1] - 6}" fill="rgba(255,255,255,0.95)" font-size="12" font-weight="900">${Math.round(values[i])}%</text>
      `).join('');

      container.innerHTML = `
        <svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" role="img" aria-label="Radar chart">
          <defs>
            <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
              <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="rgba(0,0,0,0.25)"/>
            </filter>
          </defs>
          ${ringPolys}
          ${axes.join('')}
          <polygon points="${polygonPoints}" fill="rgba(255,255,255,0.22)" stroke="rgba(255,255,255,0.85)" stroke-width="2" filter="url(#shadow)"/>
          ${dots}
          ${labelsSvg}
        </svg>
      `;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll('&', '&amp;')
        .replaceAll('<', '&lt;')
        .replaceAll('>', '&gt;')
        .replaceAll('"', '&quot;')
        .replaceAll("'", '&#039;');
    }

    function printResults() { window.print(); }

    function exportResults() {
      const scores = calculateScores();
      const overall = getMaturityLevelByPercent(scores.percentage);

      let csvContent = "\uFEFF";
      csvContent += "×ª×•×¦××•×ª ××‘×—×•×Ÿ ×‘×©×œ×•×ª ×“××˜×” (××¨×’×•×Ÿ ×—×‘×¨×ª×™)\n\n";
      csvContent += `×ª××¨×™×š,${new Date().toLocaleDateString('he-IL')}\n`;
      csvContent += `×¦×™×•×Ÿ ×›×•×œ×œ,${scores.percentage}%\n`;
      csvContent += `×¨××ª ×‘×©×œ×•×ª ×›×•×œ×œ×ª,${overall.level}\n\n`;
      csvContent += "×××“,×¦×™×•×Ÿ,×¨××ª ×‘×©×œ×•×ª\n";

      Object.entries(scores.categories).forEach(([name, data]) => {
        const info = getMaturityLevelByPercent(data.percentage);
        csvContent += `${name},${data.percentage}%,${info.level}\n`;
      });

      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      link.setAttribute('href', url);
      link.setAttribute('download', `××‘×—×•×Ÿ_×‘×©×œ×•×ª_×“××˜×”_××¨×’×•×Ÿ_×—×‘×¨×ª×™_${new Date().toLocaleDateString('he-IL')}.csv`);
      link.style.visibility = 'hidden';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function restartAssessment() {
      if (!confirm('×”×× ×œ×”×ª×—×™×œ ××—×“×©? ×›×œ ×”×ª×©×•×‘×•×ª ×™×™××—×§×•.')) return;

      answers = {};
      currentSectionIndex = 0;

      document.getElementById('resultsSection').classList.remove('show');
      document.getElementById('startScreen').style.display = 'block';
      document.getElementById('questionsContainer').style.display = 'block';
      document.getElementById('progressContainer').style.display = 'none';
      document.getElementById('navigationButtons').style.display = 'none';

      document.querySelectorAll('.scale-button').forEach(btn => btn.classList.remove('selected'));
      document.querySelectorAll('.radio-option').forEach(opt => opt.classList.remove('selected'));
      document.querySelectorAll('.binary-btn').forEach(btn => {
        btn.classList.remove('selected-yes');
        btn.classList.remove('selected-no');
      });
      document.querySelectorAll('.scale-button').forEach(btn => btn.disabled = false);

      updateProgress();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
